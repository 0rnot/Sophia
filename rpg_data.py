# rpg_data.py
import logging
import random

logger = logging.getLogger('SophiaBot.RPGData')

INVENTORY_LIMIT = 30
DEVELOPER_ID = 1033218587676123146

SELL_PRICES = {
    "common": 500,
    "uncommon": 1000,
    "rare": 2500,
    "epic": 5000,
    "legendary": 10000,
    "mythic": 15000,
    "unique": 50000
}

RARITY_WEIGHTS = {
    "common": 339,
    "uncommon": 300,
    "rare": 200,
    "epic": 100,
    "legendary": 50,
    "mythic": 10,
    "unique": 1
}
TOTAL_RARITY_WEIGHT = sum(RARITY_WEIGHTS.values())

RARITY_PROBABILITIES = {r: f"{(w / TOTAL_RARITY_WEIGHT) * 100:.1f}%" for r, w in RARITY_WEIGHTS.items()}
RARITY_ORDER = {
    "common": 1,
    "uncommon": 2,
    "rare": 3,
    "epic": 4,
    "legendary": 5,
    "mythic": 6,
    "unique": 7
}

# --- Base Equipment Names and Effect Prefixes (200 weapons, 200 armors, 200 effects) ---
# Each tuple: (name, ATK, DEF) for items or (prefix, ATK_bonus, DEF_bonus) for effects

BASE_ITEMS_WEAPONS_DEFINITIONS = {
    "common": [
        ("丸めたチラシ", 5, 0), ("しょうゆ差し", 6, 0), ("ピコピコハンマー", 3, 2), ("猫じゃらし", 5, 0), ("ホチキスガン", 3, 0),
        ("水鉄砲", 6, 0), ("濡れタオル", 3, 0), ("チクワ", 3, 2), ("孫の手", 5, 0), ("メガホン", 3, 0),
        ("歯ブラシ", 6, 0), ("ペットボトルロケット", 3, 0), ("うちわ", 3, 2), ("ゴムパッチン", 5, 0), ("安全ピン", 3, 0),
        ("トイレットペーパーの芯", 6, 0), ("定規", 3, 0), ("豆鉄砲", 3, 2), ("エアガン", 5, 0), ("ビニール傘", 3, 2),
        ("カッター", 6, 0), ("輪ゴム銃", 3, 0), ("フライ返し", 3, 2), ("ガスガン", 5, 0), ("ブーメラン", 3, 0),
        ("マヨネーズ", 6, 0), ("コンパス", 3, 0), ("新聞紙ハリセン", 3, 2), ("シャボン玉ブラスター", 5, 0), ("缶蹴り用空き缶", 3, 0),
        ("リモコン", 6, 0), ("USBメモリ", 3, 0), ("マウスパッドシールド", 2, 3), ("キーボード", 5, 2), ("プロジェクター", 3, 0),
        ("ロケット鉛筆", 6, 0), ("クリップの尖ったところ", 3, 0), ("電卓", 3, 2), ("モバイルバッテリー", 5, 0), ("イヤホンのコード", 3, 0),
        ("割り箸", 5, 0), ("プラスチックフォーク", 3, 2), ("ラップの芯", 6, 0), ("紙コップ(プラ)", 3, 0), ("曲げたハンガー", 5, 0),
        ("スプーン", 3, 2), ("ボールペンランス", 6, 0), ("消しゴムのカス", 3, 0), ("付箋", 5, 0), ("マーカー", 3, 2),
        ("カレンダーブレード", 6, 0), ("セロテープ", 3, 0), ("黒板消し", 3, 2), ("クリップボウ", 5, 0), ("ダンボールカッター", 3, 0),
        ("ストローダート", 6, 0), ("豆腐の角", 3, 0), ("洗剤スプレー", 3, 2), ("手巻きタバコ", 5, 0), ("ペーパーナイフ", 3, 0),
        ("段ボールソード", 6, 0), ("ピザカッター", 3, 0), ("紙でシュッと切れるところ(痛い)", 2, 3), ("ランチャーブル", 5, 0), ("ティッシュボックス", 3, 2),
        ("コンドーム", 6, 0), ("タッパー", 3, 0), ("スリッパ", 3, 2), ("おちんぽ様", 5, 0), ("オナホ", 3, 0)
    ],
    "uncommon": [
        ("電磁警棒", 12, 5), ("強化エアライフル", 15, 3), ("タクティカルペン", 11, 6), ("ソニックブラスター試作", 14, 5), ("カーボンファイバーナイフ", 12, 6),
        ("レールスパイクガン初号機", 18, 2), ("高圧スタンロッド", 14, 5), ("パルスガン量産型", 17, 0), ("小型スタンボム", 11, 3), ("拘束ネットランチャー", 12, 2),
        ("ショックグローブ改", 12, 5), ("レーザーサイトピストル", 15, 3), ("小型テーザーガン", 11, 6), ("サーマルカッター", 14, 5), ("アサルト警棒MarkII", 12, 6),
        ("マイクロウェーブエミッター", 18, 2), ("タクティカルアックス", 14, 5), ("ボルトアクションライフル改", 17, 0), ("指向性EMPグレネード", 11, 3), ("スパイダーワイヤーガン", 12, 2),
        ("軍用コンバットナイフ", 12, 5), ("リボルバーカスタム", 15, 3), ("電磁ジャベリン", 11, 6), ("粒子ビームハンドガン", 14, 5), ("強化カーボンバット", 12, 6),
        ("指向性音響デバイス", 18, 2), ("携帯火炎放射器", 14, 5), ("サブマシンガンプロト", 17, 0), ("粘着フォームディスペンサー", 11, 3), ("強化ワイヤーカッター", 12, 2),
        ("衝撃波ピストル", 15, 3), ("ステルスダガー", 12, 5), ("高周波スピア", 14, 5), ("フレアガン改", 11, 6), ("グラップルガン", 12, 2),
        ("ソーラーブレード", 15, 3), ("プラズマトーチ", 12, 5), ("チェーンボルトガン", 17, 0), ("煙幕グレネード", 11, 3), ("強化クロスボウ", 14, 5),
        ("ナノファイバーランス", 12, 6), ("電撃バトン", 15, 3), ("パルスグレネード", 11, 6), ("タクティカルショットガン", 18, 2), ("バイオセンサーガン", 12, 5),
        ("フォースナックル", 14, 5), ("レーザーダート", 11, 3), ("ショックワイヤー", 12, 2), ("コンパクトライフル", 15, 3), ("シールドブレイカー", 12, 6)
    ],
    "rare": [
        ("プラズマピストル量産型", 27, 11), ("試作型レールガン", 24, 9), ("ソニックライフルカスタム", 30, 8), ("フォトンエッジブレード", 23, 14), ("電磁パルスキャノン試作", 21, 15),
        ("ジャイロジェットライフル改", 29, 9), ("レーザーカービン銃", 27, 11), ("エネルギーウィップ改", 26, 12), ("グラビティハンマー軽量型", 20, 18), ("スマートライフルMarkII", 33, 6),
        ("粒子ビームライフル", 27, 11), ("マグネティックガンプロト", 24, 9), ("高周波振動ブレード", 30, 8), ("暗視スコープ付きアサルト", 23, 14), ("指向性EMPキャノン", 21, 15),
        ("コイルガンライフル", 29, 9), ("ビームサーベル試作品", 27, 11), ("チェーンソーソード", 26, 12), ("サイレンサーSMGカスタム", 20, 18), ("自動迎撃タレット試作", 33, 6),
        ("ナノブラスター", 27, 11), ("プラズマランス", 24, 9), ("フォトンブレード", 30, 8), ("イオンスピア", 23, 14), ("ハイパーカッター", 21, 15),
        ("グラビトンライフル", 29, 9), ("ディスラプターガン", 27, 11), ("ソーラーキャノン", 26, 12), ("ステルススナイパー", 20, 18), ("パルスランチャー", 33, 6),
        ("エレクトロハンマー", 27, 11), ("ビームカタナ", 24, 9), ("フレアブラスター", 30, 8), ("シールドジャマー", 23, 14), ("クオリアガン", 21, 15),
        ("マグナムライフル", 29, 9), ("エネルギーシックル", 27, 11), ("サイクロトロンガン", 26, 12), ("オプティックブラスト", 20, 18), ("ナノエッジソード", 33, 6)
    ],
    "epic": [
        ("アンチマテリアルライフルカスタム", 48, 18), ("プラズマキャノンランチャー", 45, 15), ("レールキャノンシステム", 53, 12), ("ヴォイドエッジソード", 42, 24), ("ダークマタープロジェクター", 39, 27),
        ("クォンタムエンタングルライフル", 57, 11), ("ヘビーパルスキャノン", 50, 17), ("グラビトンインパルスアックス", 54, 21),
        ("クロノブラスター", 48, 18), ("エーテルブレード", 45, 15), ("ニュートリノキャノン", 53, 12), ("シャドウランス", 42, 24),
        ("プラズマディスラプター", 39, 27), ("ハイパーレールガン", 57, 11), ("ヴォルテックスガン", 50, 17), ("オメガソード", 54, 21),
        ("インフィニティライフル", 48, 18), ("カオスエッジ", 45, 15), ("テラパルサー", 53, 12), ("ネクロブラスト", 42, 24)
    ],
    "legendary": [
        ("因果律歪曲カタナ真打", 83, 38), ("時空断裂レールガン終式", 90, 30),
        ("アポカリプスブレード", 87, 33), ("オラクルキャノン", 93, 27), ("エターナルランス", 84, 36),
        ("ソウルリーパー", 89, 32), ("ゼノブラスター", 92, 29), ("フェイトブレイカー", 86, 35),
        ("クリプトスラッシャー", 90, 30), ("エンドゲームライフル", 83, 38)
    ],
    "mythic": [
        ("星屑のディメンションソード", 120, 53), ("無限収束プラズマガン", 128, 45),
        ("コスモスハンマー", 123, 50), ("ギャラクシーブレード", 117, 56),
        ("ネビュラキャノン", 126, 47), ("ステラアックス", 122, 51)
    ],
    "unique": [
        ("神域の終焉カタナ", 165, 75), ("天界の創造レールガン", 173, 68),
        ("聖光の審判ハンマー", 168, 72), ("永遠の破壊スピア", 162, 78)
    ]
}

BASE_ITEMS_ARMORS_DEFINITIONS = {
    "common": [
        ("段ボール鎧", 0, 6), ("鍋のフタシールド", 0, 8), ("野球帽", 0, 3), ("レインポンチョ", 2, 5), ("軍手", 0, 3),
        ("重ね着Tシャツ", 0, 6), ("水中ゴーグル", 0, 3), ("プチプチ梱包材スーツ", 0, 9), ("まな板シールド", 0, 8), ("ビーチサンダル", 0, 3),
        ("バスタオルマント", 0, 6), ("ヘルメット代わりのザル", 0, 8), ("伊達メガネ", 0, 3), ("雑誌を重ねたベスト", 2, 5), ("ゴム手袋", 0, 3),
        ("マフラー", 0, 6), ("花粉症マスク", 0, 3), ("自転車用ヘルメット", 0, 9), ("お盆シールド", 0, 8), ("スリッパ", 0, 3),
        ("ジャージ上下", 2, 6), ("浮き輪シールド", 0, 8), ("サンバイザー", 0, 3), ("ゴミ袋ポンチョ", 2, 5), ("ネックウォーマー", 0, 3),
        ("パーカーのフード", 0, 6), ("サングラス", 0, 3), ("新聞紙を詰めたジャケット", 0, 9), ("座布団シールド", 0, 8), ("長靴", 0, 3),
        ("エプロン", 2, 6), ("クッション兜", 0, 8), ("アイマスク", 0, 3), ("レジャーシートマント", 2, 5), ("アームカバー", 0, 3),
        ("厚手の靴下", 0, 6), ("バケツヘルム", 0, 8), ("ヘッドホン", 0, 3), ("スマホケース", 2, 5), ("リストバンド", 0, 3),
        ("ビニールカッパ", 0, 6), ("紙皂シールド", 0, 8), ("キャップ帽", 0, 3), ("毛布マント", 2, 5), ("膝サポーター", 0, 3),
        ("作業用グローブ", 0, 6), ("弁当箱ヘルム", 0, 8), ("メガネケース", 0, 3), ("カーテンケープ", 2, 5), ("肘パッド", 0, 3),
        ("ダンボールガード", 0, 9), ("プラスチックトレイ", 0, 8), ("ニット帽", 0, 3), ("タオルベスト", 2, 5), ("足首サポーター", 0, 3),
        ("ランチバッグ", 0, 6), ("フライパンシールド", 0, 8), ("ゴーグル", 0, 3), ("寝袋スーツ", 2, 5), ("指サック", 0, 3),
        ("ブックカバー", 0, 6), ("木の板シールド", 0, 8), ("ビニールハット", 0, 3), ("ラップフィルム", 2, 5), ("ヘアバンド", 0, 3),
        ("カレンダーガード", 0, 6), ("段ボールヘルム", 0, 8), ("イヤーマフ", 0, 3), ("紙袋ベスト", 2, 5), ("布テープ", 0, 3)
    ],
    "uncommon": [
        ("防刃ベストLV1", 5, 15), ("軽量カーボンヘルメット", 3, 18), ("強化ポリカーボネートシールド", 2, 14), ("タクティカルジャケット", 6, 11), ("衝撃吸収パッドベスト", 5, 14),
        ("チェストリグアーマー", 3, 15), ("コンバットブーツ試作", 2, 12), ("透明バリスティックシールド", 0, 20), ("暗視機能付きゴーグル", 5, 11), ("耐刃グローブ改", 3, 14),
        ("ステルス機能付きジャケット", 5, 15), ("軽量防弾ヘルメット改", 3, 18), ("強化アサルトグローブ", 2, 14), ("耐火防護スーツ", 6, 11), ("ボディアーマー量産型", 5, 14),
        ("タクティカルブーツ改", 3, 15), ("強化アームプロテクター", 2, 12), ("クリアライオットシールド", 0, 20), ("サーマルビジョンゴーグル", 5, 11), ("ハードナックルプロテクター", 3, 14),
        ("強化レザージャケット", 5, 15), ("軍用ヘルメット試作", 3, 18), ("強化レッグプロテクター", 2, 14), ("冷却機能付きベスト", 6, 11), ("耐衝撃インナースーツ", 5, 14),
        ("防刃コンバットブーツ", 3, 15), ("カーボンファイバーガード", 2, 12), ("バリスティックシールド改", 0, 20), ("ARHUDゴーグル", 5, 11), ("防振タクティカルグローブ", 3, 14),
        ("強化チェストプレート", 5, 15), ("ステルスヘルム", 3, 18), ("衝撃分散シールド", 2, 14), ("タクティカルケープ", 6, 11), ("耐熱アーマー", 5, 14),
        ("コンバットガード", 3, 15), ("強化ソールブーツ", 2, 12), ("透明アーマーシールド", 0, 20), ("ナイトビジョンゴーグル", 5, 11), ("耐切創グローブ", 3, 14),
        ("軽量タクティカルスーツ", 5, 15), ("強化コンバットヘルム", 3, 18), ("衝撃吸収ガード", 2, 14), ("耐火ケープ", 6, 11), ("バトルアーマー", 5, 14),
        ("タクティカルレッグガード", 3, 15), ("カーボンプレート", 2, 12), ("ライオットガード", 0, 20), ("HUDディスプレイ", 5, 11), ("強化ナックルガード", 3, 14)
    ],
    "rare": [
        ("パワードスーツ試作量産型", 11, 27), ("複合装甲ヘルメット改", 9, 30), ("携帯型エネルギーシールド", 8, 24), ("光学迷彩ジャケットMarkII", 14, 21), ("外骨格アシストギア改", 9, 29),
        ("リアクティブアーマープレート", 8, 33), ("フォースフィールドガントレット試作", 12, 23), ("電磁バリア発生シールド", 6, 36), ("サイバーウェアゴーグル", 11, 20), ("ナノテク繊維強化スーツ", 12, 27),
        ("強化外骨格フレーム", 11, 27), ("多機能センサーヘルメット", 9, 30), ("粒子バリアジェネレーター", 8, 24), ("ほかほかパンツ", 14, 21), ("運動エネルギー吸収フィールドベスト", 9, 29),
        ("強化ジャンプブーツ", 8, 33), ("EMPシールドグローブ", 12, 23), ("ディフレクターフィールドシールド", 6, 36), ("スマートコンタクトディスプレイ", 11, 20), ("自己修復ナノアーマー試作", 12, 27),
        ("プラズマガードスーツ", 11, 27), ("強化センサーヘルム", 9, 30), ("フォトンバリア", 8, 24), ("ステルスケープ", 14, 21), ("ナノリペアアーマー", 9, 29),
        ("アクティブアーマー", 8, 33), ("イオンシールドガントレット", 12, 23), ("エネルギーウォール", 6, 36), ("ARビジョンゴーグル", 11, 20), ("ダイナミックアーマー", 12, 27),
        ("パワーアシストフレーム", 11, 27), ("タクティカルセンサー", 9, 30), ("グラビトンバリア", 8, 24), ("クロークジャケット", 14, 21), ("衝撃拡散ベスト", 9, 29),
        ("オーバーブーストブーツ", 8, 33), ("パルスガードグローブ", 12, 23), ("ディフェンスフィールド", 6, 36), ("スマートレンズ", 11, 20), ("ナノシールドスーツ", 12, 27)
    ],
    "epic": [
        ("戦術強襲用パワードスーツカスタム", 18, 48), ("量子演算防護フィールドジェネレーター", 15, 45), ("アダマンチウム合金製シールド", 11, 57), ("サイキックリフレクターシステム", 24, 39),
        ("ステルス戦闘用光学迷彩スーツ", 21, 53), ("ニューラルインターフェース戦闘ヘルメット", 12, 42), ("グラビティコントロールフィールドマント", 17, 38), ("プラズマディフレクターシステム", 23, 50),
        ("クロノアーマー", 18, 48), ("エーテルシールド", 15, 45), ("ニュートリノガード", 11, 57), ("シャドウバリア", 24, 39),
        ("プラズマリフレクター", 21, 53), ("ハイパーヘルム", 12, 42), ("ヴォルテックスマント", 17, 38), ("オメガガード", 23, 50),
        ("インフィニティスーツ", 18, 48), ("カオスシールド", 15, 45), ("テラバリア", 11, 57), ("ネクロアーマー", 24, 39)
    ],
    "legendary": [
        ("概念防壁アストラルフィールドアーマー", 38, 83), ("絶対不可侵ラグナロクフォートレスシールド", 30, 90),
        ("アポカリプスガード", 33, 87), ("オラクルバリア", 36, 84), ("エターナルアーマー", 32, 89),
        ("ソウルプロテクター", 35, 86), ("ゼノシールド", 29, 92), ("フェイトガード", 39, 81),
        ("クリプトアーマー", 30, 90), ("エンドゲームシールド", 38, 83)
    ],
    "mythic": [
        ("星屑のディメンションガード", 53, 120), ("無限収束プラズマバリア", 45, 128),
        ("コスモスシールド", 50, 123), ("ギャラクシーマント", 56, 117),
        ("ネビュラガード", 47, 126), ("ステラプロテクター", 51, 122)
    ],
    "unique": [
        ("神域の終焉アーマー", 75, 165), ("天界の創造シールド", 68, 173),
        ("聖光の審判ガード", 72, 168), ("永遠の破壊バリア", 78, 162)
    ]
}

EFFECT_PREFIX_DEFINITIONS = {
    "common": [
        ("ありふれた", 2, 2), ("少しだけ", 2, 3), ("ジャンク品の", 0, 2), ("間に合わせの", -2, 2), ("旧式の", 2, -2),
        ("手作りの", 3, 2), ("量産型の", 2, 2), ("中古の", 0, 3), ("埃っぽい", 2, 0), ("テスト用の", 0, 2),
        ("安価な", 3, 0), ("試作の", 2, 3), ("ローテクな", 0, 2), ("拾った", -2, 3), ("公務員専用", 2, -2),
        ("橋立怜弥仕様の", 3, 2), ("一般的な", 2, 2), ("傷だらけの", 0, 3), ("西野響輝仕様の", 2, 0), ("山下幸平が使ってた", 2, 2),
        ("ノーブランドの", 3, 0), ("模倣品の", 2, 3), ("ダサい", 0, 2), ("型落ちの", -2, 2), ("低品質な", 2, -2),
        ("自作の", 3, 2), ("使い捨ての", 2, 2), ("ボロボロの", 0, 3), ("リサイクル品の", 2, 0), ("簡易的な", 0, 2),
        ("特価品の", 3, 0), ("持田柊仕様の", 2, 3), ("欠陥品の", 0, 2), ("訳ありの", -2, 3), ("無料配布の", 2, -2),
        ("粗悪な", 3, 2), ("老害専用", 2, 2), ("レプリカの", 0, 3), ("おもちゃの", 2, 0), ("メルカリで転売されてた", 2, 2),
        ("使い古しの", 3, 0), ("簡素な", 2, 3), ("粗雑な", 0, 2), ("仮組みの", -2, 2), ("古びた", 2, -2),
        ("黒人が使ってた", 3, 2), ("普及型の", 2, 2), ("傷物の", 0, 3), ("過剰在庫の", 2, 0), ("DLsiteで売ってた", 0, 2),
        ("廉価版の", 3, 0), ("試験品の", 2, 3), ("低予算の", 0, 2), ("紛失物の", -2, 3), ("一般品の", 2, -2),
        ("再生品の", 3, 2), ("手直しの", 2, 2), ("使い込まれた", 0, 3), ("ふるさと納税返礼品の", 2, 0), ("簡易型の", 0, 2),
        ("特売品の", 3, 0), ("うんちの匂いがする", 2, 3), ("不良品の", 0, 2), ("展示品の", -2, 3), ("配給品の", 2, -2)
    ],
    "uncommon": [
        ("改良された", 6, 5), ("頑丈な", 5, 6), ("アップグレード版の", 8, 3), ("発光する", 3, 8), ("軍用規格の", 6, 6),
        ("精密な", 5, 5), ("カスタムメイドの", 6, 3), ("強化型の", 3, 6), ("信頼性の高い", 5, 3), ("スタイリッシュな", 3, 5),
        ("調整済みの", 6, 5), ("実用的な", 5, 6), ("高性能な", 8, 3), ("微かに光る", 3, 8), ("バランス調整型の", 6, 6),
        ("新品の", 5, 5), ("職人仕上げの", 6, 3), ("堅牢な", 3, 6), ("実戦仕様の", 5, 3), ("特別仕様の", 3, 5),
        ("最新ロットの", 6, 5), ("研磨された", 5, 6), ("高級な", 8, 3), ("オーラを纏う", 3, 8), ("限定モデルの", 6, 6),
        ("高耐久の", 5, 5), ("熟練者用の", 6, 3), ("改良版の", 3, 6), ("色盲専用の", 5, 3), ("先進的な", 3, 5),
        ("最適化された", 6, 5), ("耐久性の", 5, 6), ("高出力の", 8, 3), ("強化された", 3, 8), ("戦術仕様の", 6, 6),
        ("精製された", 5, 5), ("特注の", 6, 3), ("堅固な", 3, 6), ("実戦型の", 5, 3), ("専用設計の", 3, 5),
        ("新型の", 6, 5), ("洗練された", 5, 6), ("高精度の", 8, 3), ("輝く", 3, 8), ("限定生産の", 6, 6),
        ("強化構造の", 5, 5), ("プロ仕様の", 6, 3), ("淫夢厨専用", 3, 6), ("実用型の", 5, 3), ("特別版の", 3, 5)
    ],
    "rare": [
        ("次世代型の", 12, 9), ("エネルギー励起の", 9, 12), ("超高性能な", 15, 8), ("眩しく光る", 8, 15), ("達人級の", 11, 11),
        ("プラズマ化された", 17, 6), ("冷却機構付きの", 6, 17), ("電磁加速式の", 14, 9), ("対サイバー用の", 9, 14), ("暗黒物質コーティングの", 12, 11),
        ("マスタークラフトの", 12, 9), ("神秘的なエネルギーの", 9, 12), ("精巧な", 15, 8), ("光輝く", 8, 15), ("匠の技が光る", 11, 11),
        ("高出力の", 17, 6), ("絶対零度処理の", 6, 17), ("電撃チャージの", 14, 9), ("対霊体用の", 9, 14), ("深宇宙合金の", 12, 11),
        ("オーバークロックの", 12, 9), ("プラズマシールドの", 9, 12), ("超精密な", 15, 8), ("燦然と輝く", 8, 15), ("名工の", 11, 11),
        ("ハイパーチャージの", 17, 6), ("冷却回路の", 6, 17), ("マグネティックコアの", 14, 9), ("対ナノテク用の", 9, 14), ("クリスタル合金の", 12, 11),
        ("超効率の", 12, 9), ("エネルギー回路の", 9, 12), ("精密制御の", 15, 8), ("光沢ある", 8, 15), ("職人技の", 11, 11),
        ("オーバードライブの", 17, 6), ("極低温の", 6, 17), ("電流強化の", 14, 9), ("対EMP用の", 9, 14), ("ナノコーティングの", 12, 11)
    ],
    "epic": [
        ("オーバーテクノロジーの", 23, 15), ("異星由来の", 15, 23), ("VTuberの", 27, 12), ("星間物質製の", 12, 27),
        ("対艦級の", 30, 11), ("持田家直伝-", 11, 30), ("次元干渉型の", 24, 18), ("開発者もびっくりの", 26, 14),
        ("クロノ加速の", 23, 15), ("エーテル注入の", 15, 23), ("つよい⇢", 27, 12), ("シャドウ回路の", 12, 27),
        ("【貧乳専用】", 30, 11), ("ソウルリンクの", 11, 30), ("(装備名考えるの疲れた、割と強い⇢)", 24, 18), ("オメガプロセッサの", 26, 14),
        ("インフィニティコアの", 23, 15), ("カオス注入の", 15, 23), ("あ、これは", 27, 12), ("ネクロ回路の", 12, 27)
    ],
    "legendary": [
        ("神性粒子を宿す", 42, 33), ("因果律を歪める", 33, 42),
        ("アポカリプスの", 39, 36), ("オラクル搭載の", 36, 39), ("エターナルコアの", 41, 35),
        ("ソウルバウンドの", 35, 41), ("ゼノプロセッサの", 38, 38), ("フェイトシフターの", 44, 32),
        ("クリプト回路の", 33, 42), ("エンドゲームの", 42, 33)
    ],
    "mythic": [
        ("星屑の輝きを帯びた", 60, 53), ("無限収束の", 53, 60),
        ("コスモスエネルギーの", 57, 56), ("ギャラクシーコアの", 56, 57),
        ("ネビュラシフトの", 59, 54), ("ステラパルスの", 54, 59)
    ],
    "unique": [
        ("神域の加護を宿す", 90, 75), ("天界の意志を帯びた", 75, 90),
        ("聖光の結晶化された", 83, 83), ("永遠の調和を纏う", 87, 78)
    ]
}

ITEMS_TABLE_DATA = []
EFFECTS_TABLE_DATA = []

item_id_counter = 1
for rarity, items in BASE_ITEMS_WEAPONS_DEFINITIONS.items():
    for name, atk, defe in items:
        ITEMS_TABLE_DATA.append((item_id_counter, name, "weapon", rarity, atk, defe))
        item_id_counter += 1
for rarity, items in BASE_ITEMS_ARMORS_DEFINITIONS.items():
    for name, atk, defe in items:
        ITEMS_TABLE_DATA.append((item_id_counter, name, "armor", rarity, atk, defe))
        item_id_counter += 1

effect_id_counter = 1
for rarity, effects in EFFECT_PREFIX_DEFINITIONS.items():
    for prefix, atk_bonus, def_bonus in effects:
        EFFECTS_TABLE_DATA.append((effect_id_counter, prefix, rarity, atk_bonus, def_bonus))
        effect_id_counter += 1

async def init_database(db_conn):
    await db_conn.execute('''CREATE TABLE IF NOT EXISTS items (
        item_id INTEGER PRIMARY KEY, base_name TEXT, type TEXT, rarity TEXT,
        base_attack INTEGER, base_defense INTEGER )''')
    await db_conn.execute('''CREATE TABLE IF NOT EXISTS effects (
        effect_id INTEGER PRIMARY KEY, prefix_name TEXT, rarity TEXT,
        attack_bonus INTEGER, defense_bonus INTEGER )''')
    await db_conn.execute('''CREATE TABLE IF NOT EXISTS users (
        user_id INTEGER, guild_id INTEGER, level INTEGER, total_characters INTEGER,
        equipped_weapon INTEGER, equipped_armor INTEGER, gold INTEGER DEFAULT 0,
        PRIMARY KEY (user_id, guild_id) )''')
    await db_conn.execute('''CREATE TABLE IF NOT EXISTS inventory (
        inventory_id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER, guild_id INTEGER,
        item_id INTEGER, effect_id INTEGER,
        FOREIGN KEY (user_id, guild_id) REFERENCES users (user_id, guild_id),
        FOREIGN KEY (item_id) REFERENCES items (item_id),
        FOREIGN KEY (effect_id) REFERENCES effects (effect_id) )''')

    async with db_conn.execute("SELECT COUNT(*) FROM items") as cursor:
        if (await cursor.fetchone())[0] == 0:
            await db_conn.executemany("INSERT INTO items VALUES (?, ?, ?, ?, ?, ?)", ITEMS_TABLE_DATA)
            logger.info(f"{len(ITEMS_TABLE_DATA)} ベースアイテムデータをデータベースに挿入しました。")

    async with db_conn.execute("SELECT COUNT(*) FROM effects") as cursor:
        if (await cursor.fetchone())[0] == 0:
            await db_conn.executemany("INSERT INTO effects VALUES (?, ?, ?, ?, ?)", EFFECTS_TABLE_DATA)
            logger.info(f"{len(EFFECTS_TABLE_DATA)} 効果接頭辞データをデータベースに挿入しました。")

    await db_conn.commit()
    logger.info("RPGデータベースの初期化/確認が完了しました。")